<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Our Forever Music + Content</title>
  <style>
    body, html {
      margin: 0; padding: 0; height: 100vh; width: 100vw; overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to top right, #ffb6c1, #ffe4e1);
    }
    #music-player {
      position: fixed;
      top: 0; left: 0; width: 0; height: 0; opacity: 0; pointer-events: none;
    }
    #content-frame {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      border: none;
    }
  </style>
</head>
<body>

  <!-- Hidden music player iframe -->
  <iframe 
    id="music-player" 
    src="https://www.youtube.com/embed/gDxdkSkkM0Q?autoplay=1&mute=1&loop=1&playlist=gDxdkSkkM0Q" 
    allow="autoplay" 
    allowfullscreen>
  </iframe>

  <!-- This iframe will load proposal or surprise pages -->
  <iframe id="content-frame" src="proposal_fragment.html"></iframe>

  <script>
    const musicPlayer = document.getElementById('music-player');
    const contentFrame = document.getElementById('content-frame');

    window.addEventListener('message', (event) => {
      const data = event.data;
      if (!data || typeof data !== 'object') return;

      if (data.action === 'unmuteMusic') {
        // Unmute music by reloading iframe src with mute=0
        let src = musicPlayer.src;
        if (src.includes('mute=1')) {
          src = src.replace('mute=1', 'mute=0');
          musicPlayer.src = src;
        }
      }

      if (data.action === 'navigate' && data.page) {
        contentFrame.src = data.page;
      }
    });
  </script>

</body>
</html>
